{% extends 'base.html' %}

{% block content %}
  <section class="card">
    <div class="section-header">
      <h1>Gerenciar Vendedores</h1>
      <a class="btn" href="{{ url_for('admin_dashboard') }}">Voltar ao Painel</a>
    </div>

    <form method="post" class="form">
      <h2>Criar Vendedor</h2>
      <label class="field">
        <span>Usuário</span>
        <input type="text" name="username" required>
      </label>
      <label class="field">
        <span>Senha Temporária</span>
        <input type="text" name="password" required>
      </label>
      <button type="submit" class="btn primary">Criar Vendedor</button>
    </form>
  </section>

  <section class="card">
    <h2>Vendedores Existentes</h2>
    <table class="table">
      <thead>
        <tr>
          <th>Usuário</th>
          <th>Criado em</th>
          <th>Vendas</th>
          <th>Reservas</th>
          <th>Ação</th>
        </tr>
      </thead>
      <tbody>
        {% for seller in sellers %}
          <tr>
            <td>{{ seller.username }}</td>
            <td>{{ seller.created_at }}</td>
            <td>{{ seller.sold_count }}</td>
            <td>{{ seller.reserved_count }}</td>
            <td>
              {% if seller.sold_count == 0 and seller.reserved_count == 0 %}
                <button
                  type="button"
                  class="btn danger js-confirm"
                  data-confirm-action="{{ url_for('delete_seller', user_id=seller.id) }}"
                  data-confirm-title="Excluir vendedor"
                  data-confirm-message="Deseja excluir o vendedor {{ seller.username }}?"
                  data-confirm-submit="Excluir"
                >
                  Excluir
                </button>
              {% else %}
                <button type="button" class="btn" disabled>Indisponível</button>
              {% endif %}
            </td>
          </tr>
        {% else %}
          <tr>
            <td colspan="5">Nenhum vendedor criado.</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </section>
{% endblock %}
